<div hx-target="this" hx-swap="outerHTML" class="flex flex-1 relative group">
  <!-- {% if run and not run.finished %} -->
  <!-- Auto-refresh in 1 second -->
  <div
    hx-get="/taskserver/run/breakdown?name={{name}}&job_id={{run.id}}"
    hx-trigger="load delay:1s"
  ></div>
  <!-- {% endif %} -->

  <div
    class="task-summary flex flex-col flex-1 text-gray-600 dark:text-gray-300"
  >
    <!-- {% if breakdown %} -->
    <!-- Task breakdown is cached -->
    {% include 'partials/run/list.html' %}
    <!-- {% else %} -->
    <!-- Loading... -->
    <!-- Show loading bar -->
    <div class="flex flex-1 my-2 opacity-25">
      <span class="w-6 h-6 animate-spin">
        {% include 'icons/arrow-path.svg' %}
      </span>
      <span class="pl-2">Loading task summary...</span>
    </div>
    <!-- {% endif %} -->
  </div>

  <!-- Copy the task commands to clipboard -->
  <button
    type="button"
    title="Copy commands"
    class="absolute top-2 right-2 opacity-25 group-hover:opacity-75"
    onclick="navigator.clipboard.writeText(document.querySelector('.task-commands').innerText);"
  >
    {% include 'icons/copy.svg' %}
  </button>
</div>
