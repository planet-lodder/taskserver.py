<!-- {% if item %} -->
<!-- 
{% set name = item.name %} 
{% set open = item.open %} 
{% set icon = 'icons/document.svg' %}
{% set style = 'text-gray-600 dark:text-gray-300' %} 
{% set htmx = 'hx-target="main" hx-get="/taskserver/task?name='+name+'" hx-replace-url="true"' %} 
{% set actions = item.actions %} 
{% set children = item.children %} 

{% if item.is_running %}
  {% set style = 'text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-800 dark:hover:text-blue-200 hover:text-blue-700' %} 
{% elif item.up_to_date == True %}
  {% set style = 'text-green-700 dark:text-green-300 hover:bg-green-100 dark:hover:bg-green-800 dark:hover:text-green-200 hover:text-green-700' %} 
{% elif item.up_to_date == False %}
{% endif %}
-->
<!-- {% endif %} -->

{% extends 'partials/sidenav/menu-item.html' %}

<!-- Override the task icon -->
{% block icon %}
<!-- {% if children and children.keys() %} -->
{% include 'icons/folder-minus.svg' if open else 'icons/folder-plus.svg' %}
<!-- {% elif item.up_to_date == True %} -->
{% include 'icons/document-check.svg' %}
<!-- {% elif item.up_to_date == False %} -->
{% include 'icons/document-text.svg' %}
<!-- {% else %} -->
{% include 'icons/document.svg' %}
<!-- {% endif %} -->
{% endblock icon %}

<!-- Override task item actions -->
{% block actions %}
<!-- {% if actions %} -->
<span class="flex flex-row">
  <!-- {% for value in actions %} -->
  <a
    {%if
    value.href%}href="{{ value.href }}"
    {%endif%}
    title="{{ value.name }}"
    class="{{ value.style}} ml-2 opacity-10 hover:opacity-100 cursor-pointer"
    {{value.htmx}}
  >
    {% include value.icon %}
  </a>
  <!-- {% endfor %} -->
</span>
<!-- {% endif %} -->
{% endblock actions %}

<!-- Sort task nodes by folders first, then leaf nodes -->
{% block children %}
<!-- {% if children and open %} -->
<div class="flex flex-col ml-7">
  <!-- Sort by folders first -->
  <!-- {% for name,item in children.items() %}{% if item.children %} -->
  {% include "partials/sidenav/task-node.html" %}
  <!-- {% endif %}{% endfor %} -->

  <!-- Show leaf nodes after all folders -->
  <!-- {% for name,item in children.items() %}{% if not item.children %} -->
  {% include "partials/sidenav/task-node.html" %}
  <!-- {% endif %}{% endfor %} -->
</div>
<!-- {% endif %} -->
{% endblock children %}
